# libacl-devel

BINDIR=../bin/linux
# NOTE: pwalk_audit.h is a dependency, but gets conditionally #include'd inline by pwalk.c
HASHLIB_C=hashlib/crc32.c hashlib/md5.c
PWALK_C=pwalk.c pwalk_acls.c pwalk_report.c pwalk_sums.c $(HASHLIB_C)
PWALK_H=pwalk.h pwalk_audit.h pwalk_onefs.h pwalk_sums.h
PWALK_LIBS=-lacl -lm -lrt -lpthread -g
PWALK_CFLAGS=-DLINUX -DTIMESPEC_HACK

all: pwalk xacls hacls chexcmp mystat pwalk_ls_cat

clean:
	rm -f pwalk xacls hacls chexcmp core.*

pwalk: $(PWALK_C) $(PWALK_H)
	$(CC) $(PWALK_CFLAGS) $(PWALK_C) -o $(BINDIR)/pwalk $(PWALK_LIBS)

xacls: xacls.c pwalk_acls.c pwalk_acls.h
	$(CC) xacls.c pwalk_acls.c -o $(BINDIR)/xacls -lacl

hacls: hacls.c pwalk_acls.h
	$(CC) -dH hacls.c -o $(BINDIR)/hacls

chexcmp: chexcmp.c
	$(CC) chexcmp.c -o $(BINDIR)/chexcmp

mystat: mystat.c
	$(CC) -D__LINUX__ mystat.c -o $(BINDIR)/mystat

pwalk_ls_cat: pwalk_ls_cat.c
	$(CC) pwalk_ls_cat.c -o $(BINDIR)/pwalk_ls_cat
